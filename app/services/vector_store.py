from pinecone import Pinecone
from app.core.config import settings
from typing import List, Tuple

pc = Pinecone(api_key=settings.PINECONE_API_KEY)
index = pc.Index(settings.PINECONE_INDEX_NAME)

class PineconeVectorStore:

    def __init__(self, index):
        self.index = index

    async def upsert_vector(self, tenant_id: str, doc_id: str, embedding: List[float], metadata: dict = None):

        metadata = metadata or {}
        metadata["tenant_id"] = tenant_id
        metadata["doc_id"] = doc_id
        self.index.upsert([
            {
                "id": f"{tenant_id}:{doc_id}",
                "values": embedding,
                "metadata": metadata
            }
        ])


    async def query_vectors(self, vector, top_k=10, filter=None):
        try:
            results = self.index.query(
                vector=vector,
                top_k=top_k,
                filter=filter
            )
            return results.matches
        except Exception as e:
            print(f"Error querying vectors: {e}")
            return []

vector_store = PineconeVectorStore(index)
# testing vector store
import asyncio
async def test_vector_store():
    await vector_store.upsert_vector(
        tenant_id="tenant1",
        doc_id="doc1",
        embedding=[0.030210739, 0.0016886349, -0.04338709, -0.0065322863, 0.015361151, 0.009612275, -0.00015398869, 0.048179753, -0.015572971, 0.016354475, 0.0048712804, 0.010524504, 0.07140608, 0.013076482, 0.011597276, -0.0101850955, 0.017915605, 0.032801725, -0.11302644, 0.0011996108, 0.02076383, -0.027272843, 0.0468494, -0.018579561, 0.015393328, -0.042818792, 0.021033455, -0.013414348, 0.006888539, -0.009080529, 0.021094723, 0.046925407, -0.008612134, -0.054833476, 0.017540766, 0.023556944, 0.025861878, -0.03275848, 0.04609638, -0.045709558, -0.05427291, 0.012410566, -0.03483128, 0.026595227, -0.029762039, -0.038230587, -0.019641383, 0.057012845, -0.061241556, 0.052574106, 0.04899898, 0.06423446, -0.05417557, 0.0110155335, -0.021788314, -0.030178955, -0.015678627, -0.050668973, 0.014877512, 0.00799379, 0.015694184, -0.0023753738, -0.011802187, -0.0077624386, 0.017883047, 0.011483872, 0.014953077, -0.05700238, -0.068724506, 0.043210212, 0.008192459, 0.033005152, -0.01828999, 0.004319459, 0.024501784, -0.033210367, -0.0010168063, -0.05325308, -0.005493195, 0.05913829, -0.0648072, 0.05395345, 0.08182203, 0.050205704, -0.0073413756, 0.015911184, 0.02236266, -0.108571865, -0.02048533, -0.003858483, 0.11230062, 0.01801198, -0.0049286927, -0.0017237079, 0.06541141, -0.035525993, -0.103975, -0.10869781, 0.07945828, 0.022777563, -0.003128083, 0.03129662, -0.031225871, -0.05550406, 0.048386518, 0.04140507, -0.015797228, -0.043228168, -0.037964117, 0.016920034, -0.03680733, -0.0010509464, 0.00868511, 0.011550573, -0.030075122, -0.014441805, -0.0088381395, -0.0075743725, -0.044983186, 0.049439657, -0.005023315, 0.022309717, -0.018349702, 0.060886264, 0.029376838, 0.002921205, 0.051742136, -0.0066461, -0.06775944, 0.0034413915, 0.060982935, -0.036499903, 0.011679487, 0.013736334, -0.033050895, -0.023712978, 0.047765937, 0.008272901, 0.0021239452, 0.05751318, 0.0211782, -0.025584724, -0.059962187, 0.018349556, -0.017385008, -0.03458197, 0.04472159, 0.06473019, -0.03347634, -0.025287945, -0.030454943, -0.026357193, 0.050264776, -0.017076714, -0.0034138104, -0.01942545, 0.05344548, -0.06302088, 0.035364985, -0.0034871504, 0.06366077, -0.051459864, 0.029712986, 0.017775418, -0.046531558, 0.0071829483, -0.0013238085, -0.06859699, -0.010455623, -0.015594668, -0.063569814, -0.07431411, -0.025861533, -0.09799697, 0.032183368, 0.005474614, -0.04293636, -0.013899367, -0.006128704, -0.0056048096, 0.094986096, 0.032281406, -0.02851064, -0.062675856, 0.025322687, -0.0047764205, 0.016350947, -0.0093748, 0.07681194, 0.024230758, -0.047646318, -0.00621473, -0.011674304, 0.044344362, -0.01022037, 0.0061187274, -0.028977513, -0.029847365, -0.026456114, -0.047235537, 0.03439424, 0.036000617, -0.021956934, -0.016971484, 0.030929638, 0.046531424, -0.035545085, -0.040994994, 0.0040594228, -0.009336389, -0.0007966933, -0.010850285, -0.004008336, -0.05500632, 0.050075553, -0.0030754197, 0.05879267, 0.011290227, 0.025233142, -0.012449218, 0.042834558, 0.0068141795, 0.060332976, 0.037768394, -0.0056184176, 0.028449828, -0.049709797, 0.011254593, 0.046237595, -0.044367384, -0.013910392, 0.023363523, 0.012719015, 0.05211947, -0.07362634, 0.03080725, 0.039156318, -0.061207067, -0.042305503, -0.0016108904, -0.024302226, 0.0877833, 0.05829273, 0.013877873, 0.03262511, -0.031521715, 0.044447117, 0.03098498, -0.014378638, -0.058680482, -0.018177332, -0.009692216, 0.016582152, -0.012258795, -0.06721558, -0.008566314, 0.011958471, 0.010170169, -8.880852e-05, -0.06179872, 0.05732563, 0.0039061436, -0.013764197, -0.08831194, -0.025260601, -0.09060395, -0.031833727, -0.0024690165, 0.05743815, -0.058934517, 0.023211902, -0.018918633, -0.047457367, -0.040009927, -0.02395093, 0.017872196, -0.020424455, -0.01617276, -0.008778574, -0.08216074, 0.0019800018, 0.013279165, -0.008034795, 0.020419495, 0.011043881, -0.081149906, -0.0153069, 0.015471381, -0.007529156, 0.00044190118, 0.06489529, 0.032946043, -0.0025127835, -0.031932674, 0.029834436, 0.034943495, 0.024918875, 0.020540345, -0.0147222085, -0.036589734, 0.014925699, 0.010688612, -0.012915852, 0.059584703, -0.018097954, -0.010263131, -0.041042145, -0.023745397, -0.0009753009, -0.009019497, -0.021179222, 0.025782421, -0.005502307, -0.04893842, -0.034258828, -0.028932933, -0.19758978, -0.015208366, 0.003400854, -0.006637597, 0.043224014, 0.033359867, 0.0006838061, 0.019988231, 0.0011432307, -9.224724e-05, 0.004885313, -0.031021176, 0.017124137, 0.00018507236, 0.014513909, 0.008388474, -0.0019049167, -0.048903387, -0.009422641, 0.029979313, -0.0442979, 0.019058725, 0.054420467, 0.014578195, 0.049967863, -0.0075879293, 0.03726738, 0.011067785, -0.03470361, -0.036849026, -0.04924167, 0.010724057, 0.015837433, 0.010253449, 0.026751697, 0.063025855, 0.027703695, -0.042747173, -0.01717985, 0.023524888, 0.05700326, 0.015604949, 0.04772432, -0.011080128, 0.013599954, -0.0094784945, -0.029961929, 0.02169739, 0.038725268, -0.008382801, 0.014556339, 0.033540733, -0.042642664, -0.04503129, -0.001773531, 0.023908345, 0.011976486, -0.045818042, 0.020820912, -0.0040272158, -0.06735063, -0.014611253, -0.012065392, 0.012224567, -0.0065580048, 0.004753368, 0.036473375, 0.031801656, -0.019172912, 0.05560639, -0.0520989, -0.0045675836, 0.016426794, -0.021909704, -0.022785218, 0.030623933, 0.031639546, 0.030826518, 0.008828162, 0.026027283, -0.02621308, 0.0023200328, -0.010360989, 0.0007614153, 0.00579881, -0.04979947, 0.087443, -0.07483165, 0.0070093363, 0.0042398605, 0.08734872, 0.02232929, -0.00597243, 0.037794974, 0.0010989546, -0.035309482, -0.05076166, 0.0511041, -0.0029788874, 0.012460341, 0.044975817, -0.04326744, -0.0073874346, 0.026359936, -0.033267763, 0.024108948, -0.0034498675, -0.0012766685, 0.01740943, -0.10947654, 0.01787557, 0.018163418, 0.014292784, -0.000632629, 0.05214509, 0.087068014, 0.03623852, 0.09974281, 0.06205455, 0.041992195, 0.013395882, 0.0018849097, -0.026284177, 0.026954904, -0.0029965756, 0.011994816, 0.04239675, 0.039040364, -0.02582308, 0.086794086, 0.008375783, 0.023820264, -0.024049811, -0.015366153, 0.0148514565, -0.0010660787, 0.01989918, -0.046592265, -0.07574261, 0.023875548, 0.04624685, 0.043205615, -0.027867896, -0.01526966, -0.01705614, -0.015340569, 0.041876145, 0.020778453, 0.009393083, -0.0076376335, 0.025920734, 0.014685241, -0.036541156, 0.070072845, 0.03097648, 0.018073734, 0.019993529, 0.017021643, -0.05936319, -0.010591579, 0.00821536, -0.01062951, -0.0101164235, 0.0113069145, -0.0139328055, 0.006115911, -0.0010624413, 0.01708046, 0.059069876, -0.04852636, -0.023080504, 0.009419598, -0.0074654208, 0.0070965313, -0.027157502, 0.038170923, -0.01589196, -0.011709975, -0.026212066, -0.021775497, 0.026997127, -0.0424409, -0.030381694, 0.06521619, 0.06524525, 0.02645071, -0.02894931, -0.08010937, -0.04010789, -0.015304958, -0.031107476, -0.026367094, 0.025812436, 0.018292015, 0.059732016, -0.016383315, 0.051965695, 0.042174168, -0.0009086712, 0.01923619, -0.046462465, 0.0175228, -0.0391888, 0.034148715, -0.017987879, -0.032995738, 0.035470944, -0.023931736, 0.012628788, -0.0082987845, -0.039100755, 0.014389349, 0.025899665, -0.035470154, -0.010611641, 0.06064448, 0.04399801, 0.019665215, 0.021015422, 0.04859687, 0.053498734, 0.017184678, -0.00937401, 0.008312513, -0.0020954935, 0.009109554, 0.025026694, 0.032663923, 0.05416394, 0.01474571, -0.0036138655, 0.03754552, 0.006794734, 0.08057474, -0.014370612, -0.025777578, -0.011545068, -0.0026253501, -0.01684756, -0.032341942, -0.0016514101, -0.02907373, -0.020986913, -0.030326435, 0.03861396, 0.0024583307, 0.021479568, -0.01760877, -0.015068355, 0.029520566, 0.009278711, 0.04109465, -0.04492847, 0.014534705, -0.005870307, -0.004315762, 0.021126295, -0.015341615, 0.0486281, -0.012143522, -0.04366276, 0.0020958767, 0.012266646, -0.04205794, 0.031593893, -0.014729012, 0.07802719, 0.018476084, 0.015113879, 3.4887667e-05, -0.0030151831, 0.0022205831, -0.012834349, 0.0065652905, -0.0046417834, 0.052232616, -0.009933691, -0.040199533, 0.013018419, 0.007928508, -0.027086034, 0.024344582, 0.03976743, 0.03761003, -0.042744394, -0.0039903913, 0.033648193, -0.0007890226, 0.006185614, -0.022709843, -0.03789435, -0.04558729, -0.034231465, -0.017869862, 0.019879492, 0.028294452, -0.036010105, -0.011697292, -0.061357934, 0.011321921, -0.0135619575, -0.007960513, -0.007913381, 0.0165388, 0.015358908, 0.01908468, 0.012767816, -0.042775784, -0.07921235, 0.035205208, 0.0017153102, -0.013627464, 0.08328728, 0.02145105, -0.011244474, 0.029526059, 0.04843139, -0.016685136, -0.04662232, 0.024910122, -0.033098754, 0.012297443, 0.036600325, -0.0063637537, 0.034147795, 0.017821178, 0.09130588, 0.016058316, -0.027889902, 0.047504555, 0.048189417, -0.0016795077, 0.027032936, 0.04390895, 0.0006602757, 0.06378546, -0.0037939176, -0.010451582, -0.012413421, 0.04365571, -0.03343374, -0.004930826, 0.009544208, 0.03054161, 0.00154429, -0.03663724, -0.016852394, 0.019264575, -0.0029089837, 0.0021707057, -0.03812975, 0.0049903216, -0.0053297933, -0.027354565, 0.025574658, -0.014526694, -0.030586826, 0.01472152, -0.028380001, 0.026188752, 0.0082496, 0.018388702, -0.009595271, 0.024987383, -0.009427832, 0.003267695, -0.0067751743, -0.026390024, 0.002829518, 0.008745433, 0.04904675, -0.021003544, -0.03807905, 0.04959286, 0.029079176, -0.053840484, -0.042047665, 0.0013960316, 0.013531634, 0.03508885, -0.0008216329, -0.014234679, -0.05587569, 0.007380106, -0.080471255, -0.0073640877, -0.051487774, -0.041615352, 0.02941541, 0.006555991, 0.042860527, 0.030965813, -0.052461423, -0.0042026276, -0.029780874, -0.0044535426, 0.00970393, 0.016308239, -0.019609535, -0.0047428557, 0.052212898, 0.030374257, 0.026896158, 0.002809721, 0.011016727, -0.018634157, 0.05516358, 0.037599377, 0.045636434, -0.0061135744, -0.04750795, -0.030293424, -0.04184276, 0.054960594, 0.029529784, -0.021356298, -0.013165857, 0.044457495, -0.0072120745, -0.024052627, 0.0074528335, -0.003091763, -0.05814029, -0.02500098, 0.038043424, -0.023195729, -0.061668746, 0.001419508, -0.015710033, -0.008711405, 0.0023213928, -0.054005943, -0.019600797, -0.03894281, -0.06481684, -0.04687134, -0.0037449093, 0.022527225, 0.06745092, -0.015226164, -0.006600296, 0.00011249021, 0.03113112, 0.0005862781, -0.04308509, 0.06442368, -0.023652384, 0.0149430195, -0.06023101, -0.030826256, 0.047796864, -0.03106786],
        metadata={"source": "test"}
    )
    results = await vector_store.query_vectors(
        vector=[0.030210739, 0.0016886349, -0.04338709, -0.0065322863, 0.015361151, 0.009612275, -0.00015398869, 0.048179753, -0.015572971, 0.016354475, 0.0048712804, 0.010524504, 0.07140608, 0.013076482, 0.011597276, -0.0101850955, 0.017915605, 0.032801725, -0.11302644, 0.0011996108, 0.02076383, -0.027272843, 0.0468494, -0.018579561, 0.015393328, -0.042818792, 0.021033455, -0.013414348, 0.006888539, -0.009080529, 0.021094723, 0.046925407, -0.008612134, -0.054833476, 0.017540766, 0.023556944, 0.025861878, -0.03275848, 0.04609638, -0.045709558, -0.05427291, 0.012410566, -0.03483128, 0.026595227, -0.029762039, -0.038230587, -0.019641383, 0.057012845, -0.061241556, 0.052574106, 0.04899898, 0.06423446, -0.05417557, 0.0110155335, -0.021788314, -0.030178955, -0.015678627, -0.050668973, 0.014877512, 0.00799379, 0.015694184, -0.0023753738, -0.011802187, -0.0077624386, 0.017883047, 0.011483872, 0.014953077, -0.05700238, -0.068724506, 0.043210212, 0.008192459, 0.033005152, -0.01828999, 0.004319459, 0.024501784, -0.033210367, -0.0010168063, -0.05325308, -0.005493195, 0.05913829, -0.0648072, 0.05395345, 0.08182203, 0.050205704, -0.0073413756, 0.015911184, 0.02236266, -0.108571865, -0.02048533, -0.003858483, 0.11230062, 0.01801198, -0.0049286927, -0.0017237079, 0.06541141, -0.035525993, -0.103975, -0.10869781, 0.07945828, 0.022777563, -0.003128083, 0.03129662, -0.031225871, -0.05550406, 0.048386518, 0.04140507, -0.015797228, -0.043228168, -0.037964117, 0.016920034, -0.03680733, -0.0010509464, 0.00868511, 0.011550573, -0.030075122, -0.014441805, -0.0088381395, -0.0075743725, -0.044983186, 0.049439657, -0.005023315, 0.022309717, -0.018349702, 0.060886264, 0.029376838, 0.002921205, 0.051742136, -0.0066461, -0.06775944, 0.0034413915, 0.060982935, -0.036499903, 0.011679487, 0.013736334, -0.033050895, -0.023712978, 0.047765937, 0.008272901, 0.0021239452, 0.05751318, 0.0211782, -0.025584724, -0.059962187, 0.018349556, -0.017385008, -0.03458197, 0.04472159, 0.06473019, -0.03347634, -0.025287945, -0.030454943, -0.026357193, 0.050264776, -0.017076714, -0.0034138104, -0.01942545, 0.05344548, -0.06302088, 0.035364985, -0.0034871504, 0.06366077, -0.051459864, 0.029712986, 0.017775418, -0.046531558, 0.0071829483, -0.0013238085, -0.06859699, -0.010455623, -0.015594668, -0.063569814, -0.07431411, -0.025861533, -0.09799697, 0.032183368, 0.005474614, -0.04293636, -0.013899367, -0.006128704, -0.0056048096, 0.094986096, 0.032281406, -0.02851064, -0.062675856, 0.025322687, -0.0047764205, 0.016350947, -0.0093748, 0.07681194, 0.024230758, -0.047646318, -0.00621473, -0.011674304, 0.044344362, -0.01022037, 0.0061187274, -0.028977513, -0.029847365, -0.026456114, -0.047235537, 0.03439424, 0.036000617, -0.021956934, -0.016971484, 0.030929638, 0.046531424, -0.035545085, -0.040994994, 0.0040594228, -0.009336389, -0.0007966933, -0.010850285, -0.004008336, -0.05500632, 0.050075553, -0.0030754197, 0.05879267, 0.011290227, 0.025233142, -0.012449218, 0.042834558, 0.0068141795, 0.060332976, 0.037768394, -0.0056184176, 0.028449828, -0.049709797, 0.011254593, 0.046237595, -0.044367384, -0.013910392, 0.023363523, 0.012719015, 0.05211947, -0.07362634, 0.03080725, 0.039156318, -0.061207067, -0.042305503, -0.0016108904, -0.024302226, 0.0877833, 0.05829273, 0.013877873, 0.03262511, -0.031521715, 0.044447117, 0.03098498, -0.014378638, -0.058680482, -0.018177332, -0.009692216, 0.016582152, -0.012258795, -0.06721558, -0.008566314, 0.011958471, 0.010170169, -8.880852e-05, -0.06179872, 0.05732563, 0.0039061436, -0.013764197, -0.08831194, -0.025260601, -0.09060395, -0.031833727, -0.0024690165, 0.05743815, -0.058934517, 0.023211902, -0.018918633, -0.047457367, -0.040009927, -0.02395093, 0.017872196, -0.020424455, -0.01617276, -0.008778574, -0.08216074, 0.0019800018, 0.013279165, -0.008034795, 0.020419495, 0.011043881, -0.081149906, -0.0153069, 0.015471381, -0.007529156, 0.00044190118, 0.06489529, 0.032946043, -0.0025127835, -0.031932674, 0.029834436, 0.034943495, 0.024918875, 0.020540345, -0.0147222085, -0.036589734, 0.014925699, 0.010688612, -0.012915852, 0.059584703, -0.018097954, -0.010263131, -0.041042145, -0.023745397, -0.0009753009, -0.009019497, -0.021179222, 0.025782421, -0.005502307, -0.04893842, -0.034258828, -0.028932933, -0.19758978, -0.015208366, 0.003400854, -0.006637597, 0.043224014, 0.033359867, 0.0006838061, 0.019988231, 0.0011432307, -9.224724e-05, 0.004885313, -0.031021176, 0.017124137, 0.00018507236, 0.014513909, 0.008388474, -0.0019049167, -0.048903387, -0.009422641, 0.029979313, -0.0442979, 0.019058725, 0.054420467, 0.014578195, 0.049967863, -0.0075879293, 0.03726738, 0.011067785, -0.03470361, -0.036849026, -0.04924167, 0.010724057, 0.015837433, 0.010253449, 0.026751697, 0.063025855, 0.027703695, -0.042747173, -0.01717985, 0.023524888, 0.05700326, 0.015604949, 0.04772432, -0.011080128, 0.013599954, -0.0094784945, -0.029961929, 0.02169739, 0.038725268, -0.008382801, 0.014556339, 0.033540733, -0.042642664, -0.04503129, -0.001773531, 0.023908345, 0.011976486, -0.045818042, 0.020820912, -0.0040272158, -0.06735063, -0.014611253, -0.012065392, 0.012224567, -0.0065580048, 0.004753368, 0.036473375, 0.031801656, -0.019172912, 0.05560639, -0.0520989, -0.0045675836, 0.016426794, -0.021909704, -0.022785218, 0.030623933, 0.031639546, 0.030826518, 0.008828162, 0.026027283, -0.02621308, 0.0023200328, -0.010360989, 0.0007614153, 0.00579881, -0.04979947, 0.087443, -0.07483165, 0.0070093363, 0.0042398605, 0.08734872, 0.02232929, -0.00597243, 0.037794974, 0.0010989546, -0.035309482, -0.05076166, 0.0511041, -0.0029788874, 0.012460341, 0.044975817, -0.04326744, -0.0073874346, 0.026359936, -0.033267763, 0.024108948, -0.0034498675, -0.0012766685, 0.01740943, -0.10947654, 0.01787557, 0.018163418, 0.014292784, -0.000632629, 0.05214509, 0.087068014, 0.03623852, 0.09974281, 0.06205455, 0.041992195, 0.013395882, 0.0018849097, -0.026284177, 0.026954904, -0.0029965756, 0.011994816, 0.04239675, 0.039040364, -0.02582308, 0.086794086, 0.008375783, 0.023820264, -0.024049811, -0.015366153, 0.0148514565, -0.0010660787, 0.01989918, -0.046592265, -0.07574261, 0.023875548, 0.04624685, 0.043205615, -0.027867896, -0.01526966, -0.01705614, -0.015340569, 0.041876145, 0.020778453, 0.009393083, -0.0076376335, 0.025920734, 0.014685241, -0.036541156, 0.070072845, 0.03097648, 0.018073734, 0.019993529, 0.017021643, -0.05936319, -0.010591579, 0.00821536, -0.01062951, -0.0101164235, 0.0113069145, -0.0139328055, 0.006115911, -0.0010624413, 0.01708046, 0.059069876, -0.04852636, -0.023080504, 0.009419598, -0.0074654208, 0.0070965313, -0.027157502, 0.038170923, -0.01589196, -0.011709975, -0.026212066, -0.021775497, 0.026997127, -0.0424409, -0.030381694, 0.06521619, 0.06524525, 0.02645071, -0.02894931, -0.08010937, -0.04010789, -0.015304958, -0.031107476, -0.026367094, 0.025812436, 0.018292015, 0.059732016, -0.016383315, 0.051965695, 0.042174168, -0.0009086712, 0.01923619, -0.046462465, 0.0175228, -0.0391888, 0.034148715, -0.017987879, -0.032995738, 0.035470944, -0.023931736, 0.012628788, -0.0082987845, -0.039100755, 0.014389349, 0.025899665, -0.035470154, -0.010611641, 0.06064448, 0.04399801, 0.019665215, 0.021015422, 0.04859687, 0.053498734, 0.017184678, -0.00937401, 0.008312513, -0.0020954935, 0.009109554, 0.025026694, 0.032663923, 0.05416394, 0.01474571, -0.0036138655, 0.03754552, 0.006794734, 0.08057474, -0.014370612, -0.025777578, -0.011545068, -0.0026253501, -0.01684756, -0.032341942, -0.0016514101, -0.02907373, -0.020986913, -0.030326435, 0.03861396, 0.0024583307, 0.021479568, -0.01760877, -0.015068355, 0.029520566, 0.009278711, 0.04109465, -0.04492847, 0.014534705, -0.005870307, -0.004315762, 0.021126295, -0.015341615, 0.0486281, -0.012143522, -0.04366276, 0.0020958767, 0.012266646, -0.04205794, 0.031593893, -0.014729012, 0.07802719, 0.018476084, 0.015113879, 3.4887667e-05, -0.0030151831, 0.0022205831, -0.012834349, 0.0065652905, -0.0046417834, 0.052232616, -0.009933691, -0.040199533, 0.013018419, 0.007928508, -0.027086034, 0.024344582, 0.03976743, 0.03761003, -0.042744394, -0.0039903913, 0.033648193, -0.0007890226, 0.006185614, -0.022709843, -0.03789435, -0.04558729, -0.034231465, -0.017869862, 0.019879492, 0.028294452, -0.036010105, -0.011697292, -0.061357934, 0.011321921, -0.0135619575, -0.007960513, -0.007913381, 0.0165388, 0.015358908, 0.01908468, 0.012767816, -0.042775784, -0.07921235, 0.035205208, 0.0017153102, -0.013627464, 0.08328728, 0.02145105, -0.011244474, 0.029526059, 0.04843139, -0.016685136, -0.04662232, 0.024910122, -0.033098754, 0.012297443, 0.036600325, -0.0063637537, 0.034147795, 0.017821178, 0.09130588, 0.016058316, -0.027889902, 0.047504555, 0.048189417, -0.0016795077, 0.027032936, 0.04390895, 0.0006602757, 0.06378546, -0.0037939176, -0.010451582, -0.012413421, 0.04365571, -0.03343374, -0.004930826, 0.009544208, 0.03054161, 0.00154429, -0.03663724, -0.016852394, 0.019264575, -0.0029089837, 0.0021707057, -0.03812975, 0.0049903216, -0.0053297933, -0.027354565, 0.025574658, -0.014526694, -0.030586826, 0.01472152, -0.028380001, 0.026188752, 0.0082496, 0.018388702, -0.009595271, 0.024987383, -0.009427832, 0.003267695, -0.0067751743, -0.026390024, 0.002829518, 0.008745433, 0.04904675, -0.021003544, -0.03807905, 0.04959286, 0.029079176, -0.053840484, -0.042047665, 0.0013960316, 0.013531634, 0.03508885, -0.0008216329, -0.014234679, -0.05587569, 0.007380106, -0.080471255, -0.0073640877, -0.051487774, -0.041615352, 0.02941541, 0.006555991, 0.042860527, 0.030965813, -0.052461423, -0.0042026276, -0.029780874, -0.0044535426, 0.00970393, 0.016308239, -0.019609535, -0.0047428557, 0.052212898, 0.030374257, 0.026896158, 0.002809721, 0.011016727, -0.018634157, 0.05516358, 0.037599377, 0.045636434, -0.0061135744, -0.04750795, -0.030293424, -0.04184276, 0.054960594, 0.029529784, -0.021356298, -0.013165857, 0.044457495, -0.0072120745, -0.024052627, 0.0074528335, -0.003091763, -0.05814029, -0.02500098, 0.038043424, -0.023195729, -0.061668746, 0.001419508, -0.015710033, -0.008711405, 0.0023213928, -0.054005943, -0.019600797, -0.03894281, -0.06481684, -0.04687134, -0.0037449093, 0.022527225, 0.06745092, -0.015226164, -0.006600296, 0.00011249021, 0.03113112, 0.0005862781, -0.04308509, 0.06442368, -0.023652384, 0.0149430195, -0.06023101, -0.030826256, 0.047796864, -0.03106786],
        top_k=5,
        filter={"tenant_id": "tenant1"}
    )
    print(results)
asyncio.run(test_vector_store())